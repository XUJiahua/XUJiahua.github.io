<!DOCTYPE html>
<html><head>
<title>Github pages重新开始：使用Hugo、Typora</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-162706610-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://xujiahua.github.io/scss/journal.min.5c667e74038e21ddbb9024b67930f8544e02af62491281cf73fdb817eec2947e.css" integrity="sha256-XGZ&#43;dAOOId27kCS2eTD4VE4Cr2JJEoHPc/24F&#43;7ClH4=" media="screen">

<script src="https://xujiahua.github.io//js/loadCSS.js"></script>
<script src="https://xujiahua.github.io//js/table.js"></script>


<script src="https://xujiahua.github.io//js/toc.js"></script>


<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>






</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://xujiahua.github.io/">
    
        <div class="nav-title">
            许嘉华的笔记
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2020 许嘉华的笔记
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%87%8d%e6%96%b0%e5%bc%80%e5%a7%8bgithub-pages" v-on:click="closeDrawer" id="重新开始github-pages-nav">
										 重新开始GitHub pages
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#hugo--typora" v-on:click="closeDrawer" id="hugo--typora-nav">
										 Hugo &#43; Typora
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#hugo-quickstart" v-on:click="closeDrawer" id="hugo-quickstart-nav">
										 Hugo quickstart
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%e5%a4%b9%e7%9a%84%e9%85%8d%e7%bd%ae" v-on:click="closeDrawer" id="图片文件夹的配置-nav">
										 图片文件夹的配置
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#github-pages" v-on:click="closeDrawer" id="github-pages-nav">
										 GitHub pages
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%9b%be%e7%89%87%e8%b5%84%e6%ba%90404%e7%9a%84%e9%97%ae%e9%a2%98" v-on:click="closeDrawer" id="图片资源404的问题-nav">
										 图片资源404的问题
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%87%8d%e6%96%b0%e5%bc%80%e5%a7%8bgithub-pages" v-on:click="closeDrawer" id="重新开始github-pages-nav">
										 重新开始GitHub pages
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#hugo--typora" v-on:click="closeDrawer" id="hugo--typora-nav">
										 Hugo &#43; Typora
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#hugo-quickstart" v-on:click="closeDrawer" id="hugo-quickstart-nav">
										 Hugo quickstart
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%e5%a4%b9%e7%9a%84%e9%85%8d%e7%bd%ae" v-on:click="closeDrawer" id="图片文件夹的配置-nav">
										 图片文件夹的配置
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#github-pages" v-on:click="closeDrawer" id="github-pages-nav">
										 GitHub pages
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%9b%be%e7%89%87%e8%b5%84%e6%ba%90404%e7%9a%84%e9%97%ae%e9%a2%98" v-on:click="closeDrawer" id="图片资源404的问题-nav">
										 图片资源404的问题
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://xujiahua.github.io/">
            许嘉华的笔记
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://xujiahua.github.io/">
        <div class="single-column-header-title">许嘉华的笔记</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                 style="background-image: url('/')">
                <div class="post-title">
                    Github pages重新开始：使用Hugo、Typora
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-03-10 11:24
                        </time>
                        

                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/github-pages">GitHub pages</a>
                                &nbsp;
                            
                                <a href="/tags/hugo">Hugo</a>
                                &nbsp;
                            
                                <a href="/tags/typora">Typora</a>
                                &nbsp;
                            
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <h2 id="重新开始github-pages">重新开始GitHub pages</h2>
<p>曾使用<code>GitHub pages</code> + <code> jekyll</code> 写过一段时间博客，没啥营养。</p>
<p>打算重新开始：</p>
<ol>
<li>把我记录在Evernote和Typora中的资料迁移到<code>GitHub pages</code>上。</li>
<li>另外做一些Web形式的小工具，挂载在一个子目录里，方便平时使用。</li>
</ol>
<h2 id="hugo--typora">Hugo + Typora</h2>
<p>打算如下：</p>
<ol>
<li>Markdown文件还是使用Typora写。用过MWeb、Typora，Typora使用感受更好些（这么好用还不要钱）。</li>
<li>Hugo作为静态网站生成，创建一个博客模板。</li>
</ol>
<h3 id="hugo-quickstart">Hugo quickstart</h3>
<pre><code># 安装hugo（其实是Go编译的二进制文件）
brew install hugo

# 创建site
hugo new site quickstart

# 通过git submodule的方式下载主题
git init
git submodule -b master add https://github.com/dillonzq/LoveIt themes/LoveIt

# 更新config.toml，配置主题参数，见loveit配置

# 创建博客，创建的posts在content目录下。文件格式为：content/&lt;CATEGORY&gt;/&lt;FILE&gt;.&lt;FORMAT&gt;
# hugo new 会采用 archetypes/default.md作为模板，把一些共性配置放在这个模板里吧。
hugo new posts/my-first-post.md

# 本地看blog效果，-D表示草稿状态的博客也显示
hugo server -D

# 生成静态网站到./public/，也可以指定目录
hugo -D
</code></pre><p>挑选了一个比较实用的主题 <a href="https://hugoloveit.com/">https://hugoloveit.com/</a></p>
<ol>
<li>比较基本的posts, tags, categories</li>
<li>文章页面右边可显示文章的目录表</li>
</ol>
<p>参考：</p>
<ol>
<li><a href="https://gohugo.io/getting-started/quick-start/">https://gohugo.io/getting-started/quick-start/</a></li>
<li><a href="https://hugoloveit.com/theme-documentation-basics/">https://hugoloveit.com/theme-documentation-basics/</a></li>
</ol>
<h3 id="图片文件夹的配置">图片文件夹的配置</h3>
<p>Typora的贴图功能很方便：配置好图片文件夹，从剪贴板粘贴图像会自动将图片保存到图片文件夹，并自动命名。</p>
<p><code>hugo</code>管理静态资源的方式跟Typora默认是不适配的，需要做些调整。</p>
<h5 id="长话短说">长话短说</h5>
<ol>
<li><code>hugo</code>项目中，创建<code>static/images</code>文件夹，并且软链接到项目根目录下：</li>
</ol>
<pre><code>mkdir -p static/images &amp;&amp; ln -s `pwd`/static/images images
</code></pre><ol start="2">
<li>Typora打开content目录，并做配置如下。之后，像平常那样用Typora写文字吧。</li>
</ol>
<p><img src="../../images/image-20200310184153667.png" alt="image-20200310184153667"></p>
<h5 id="在根目录建images软链接的理由">在根目录建<code>images</code>软链接的理由</h5>
<p>一些信息和思路：</p>
<ol>
<li><code>hugo</code>的静态资源放在static目录下。</li>
<li><code>hugo</code>生成静态文件，static目录会将其下的文件、文件夹平移到目标网站目录的根目录，比如<code>static/images/1.png</code>，平移后为<code>images/1.png</code>。html里使用<code>/images/*</code>的方式引用。（可查看public文件夹的目录结构）</li>
<li>hugo static目录下的资源目录不能是软链接，WTF。Unsupported symlink found <a href="https://github.com/gohugoio/hugo/issues/6225">https://github.com/gohugoio/hugo/issues/6225</a></li>
<li>万幸Typora可以用软链接。</li>
<li>一篇post，在浏览器和文件系统上的目录结构是不同的。以最末层的文件夹为<code>./</code>。浏览器下目录结构如下：</li>
</ol>
<pre><code>/ =&gt; ../.. 举例来说，以图片文件夹名称为`image`为例，`../../images/*` = `/images/*`
	/posts/ =&gt; ../
		/posts/post_name/ =&gt; ./
</code></pre><ol start="6">
<li>文件系统下的目录结构：</li>
</ol>
<pre><code>hugo-blogger =&gt; ../../
	content =&gt; ../
		posts =&gt; ./
			post_name
</code></pre><ol start="7">
<li>所以为了能让文件系统和浏览器上都显示图像，<code>images</code>软链接放在项目根目录下比较合适。</li>
</ol>
<h3 id="github-pages">GitHub pages</h3>
<p>静态文件输出到xujiahua.github.io上去。</p>
<pre><code>git submodule add -b master https://github.com/XUJiahua/XUJiahua.github.io.git public
</code></pre><p>复用这里的deploy脚本。https://gohugo.io/hosting-and-deployment/hosting-on-github/#put-it-into-a-script</p>
<h4 id="图片资源404的问题">图片资源404的问题</h4>
<p>_images文件夹下的资源404了。太奇怪了，路径OK，也没大小问题。过了很久还是不见效。</p>
<p><img src="../../images/image-20200312190900210.png" alt="image-20200312190900210"></p>
<p>尝试在images文件夹下放了个1.txt，理论上链接应该是 <a href="https://xujiahua.github.io/images/1.txt">https://xujiahua.github.io/images/1.txt</a>，一开始也是404。过了半小时OK了。</p>
<p>结论是，_images文件夹取名可能有问题。那就改用images。</p>
<p>参考：</p>
<ol>
<li><a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">https://gohugo.io/hosting-and-deployment/hosting-on-github/</a></li>
</ol>

                    
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2020-03-10</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://xujiahua.github.io/posts/20200311-patent/">
                    Next<br>专利申请流程小结
                </a>
                
                
                
                <a class="older-posts" href="https://xujiahua.github.io/posts/20200323-use-hyper-v/">
                    Previous<br>Hyper-V使用体验
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                






            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2020 许嘉华的笔记
	</div>
    	</div>
    <script src="https://xujiahua.github.io//js/journal.js"></script>
    </body>
</html>
