<!DOCTYPE html>
<html><head>
<title>Metabase &#43; Spark SQL</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-162706610-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://xujiahua.github.io/scss/journal.min.5d0fd093a264465a2c30c56fbe9eb8cdb0764ecf3eb96e8c64de3cf6c081cc40.css" integrity="sha256-XQ/Qk6JkRlosMMVvvp64zbB2Ts8&#43;uW6MZN489sCBzEA=" media="screen">

<script src="https://xujiahua.github.io//js/loadCSS.js"></script>
<script src="https://xujiahua.github.io//js/table.js"></script>


<script src="https://xujiahua.github.io//js/toc.js"></script>


<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>






</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://xujiahua.github.io/">
    
        <div class="nav-title">
            许嘉华的笔记
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2021 许嘉华的笔记
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#metabase-%e7%ae%80%e4%bb%8b" v-on:click="closeDrawer" id="metabase-简介-nav">
										 Metabase 简介
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%94%af%e6%8c%81" v-on:click="closeDrawer" id="数据库支持-nav">
										 数据库支持
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#metabase-%e5%ae%89%e8%a3%85" v-on:click="closeDrawer" id="metabase-安装-nav">
										 Metabase 安装
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#mysql" v-on:click="closeDrawer" id="mysql-nav">
										 MySQL
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98" v-on:click="closeDrawer" id="常见问题-nav">
										 常见问题
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#metabase" v-on:click="closeDrawer" id="metabase-nav">
										 Metabase
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%85%8d%e7%bd%ae-spark-sql-%e8%bf%9e%e6%8e%a5" v-on:click="closeDrawer" id="配置-spark-sql-连接-nav">
										 配置 Spark SQL 连接
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98-1" v-on:click="closeDrawer" id="常见问题-1-nav">
										 常见问题
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%b8%8e-superset-%e6%af%94%e8%be%83" v-on:click="closeDrawer" id="与-superset-比较-nav">
										 与 Superset 比较
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#metabase-%e7%ae%80%e4%bb%8b" v-on:click="closeDrawer" id="metabase-简介-nav">
										 Metabase 简介
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%94%af%e6%8c%81" v-on:click="closeDrawer" id="数据库支持-nav">
										 数据库支持
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#metabase-%e5%ae%89%e8%a3%85" v-on:click="closeDrawer" id="metabase-安装-nav">
										 Metabase 安装
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#mysql" v-on:click="closeDrawer" id="mysql-nav">
										 MySQL
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98" v-on:click="closeDrawer" id="常见问题-nav">
										 常见问题
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#metabase" v-on:click="closeDrawer" id="metabase-nav">
										 Metabase
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%85%8d%e7%bd%ae-spark-sql-%e8%bf%9e%e6%8e%a5" v-on:click="closeDrawer" id="配置-spark-sql-连接-nav">
										 配置 Spark SQL 连接
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98-1" v-on:click="closeDrawer" id="常见问题-1-nav">
										 常见问题
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%b8%8e-superset-%e6%af%94%e8%be%83" v-on:click="closeDrawer" id="与-superset-比较-nav">
										 与 Superset 比较
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://xujiahua.github.io/">
            许嘉华的笔记
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://xujiahua.github.io/">
        <div class="single-column-header-title">许嘉华的笔记</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                 style="background-image: url('/')">
                <div class="post-title">
                    Metabase &#43; Spark SQL
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-04-10 16:41
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/">[Metabase]</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/bi">BI</a>
                                &nbsp;
                            
                                <a href="/tags/metabase">Metabase</a>
                                &nbsp;
                            
                                <a href="/tags/spark">Spark</a>
                                &nbsp;
                            
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>这是大数据 BI 平台的第二步，BI 工具的搭建。假设已经配置好 Spark SQL JDBC Server，并启用了Kerberos。参考  <a href="https://xujiahua.github.io/posts/20200410-spark-thrift-server-cdh/">https://xujiahua.github.io/posts/20200410-spark-thrift-server-cdh/</a></p>
<p>这里，我们选择了开源产品 Metabase。</p>
<p>最终，大数据 BI 平台，是由 1) 以Metabase作为BI可视化，2) 由HDFS（分布式文件存储） + parquet（列式数据存储格式）+ Hive metastore（SQL表结构信息维护） + Spark SQL（批处理引擎）组合的OLAP数据库组成。</p>
<h2 id="metabase-简介">Metabase 简介</h2>
<p>Metabase is the easy, open source way for everyone in your company to ask questions and learn from data.</p>
<p><a href="https://www.metabase.com/">https://www.metabase.com/</a></p>
<h3 id="数据库支持">数据库支持</h3>
<ul>
<li>BigQuery</li>
<li>Druid</li>
<li>Google Analytics</li>
<li>H2</li>
<li>MongoDB</li>
<li>MySQL/MariaDB</li>
<li>PostgreSQL</li>
<li>Presto</li>
<li>Amazon Redshift</li>
<li>Snowflake</li>
<li>Spark SQL</li>
<li>SQLite</li>
<li>SQL Server</li>
</ul>
<p><a href="https://www.metabase.com/docs/latest/faq/setup/which-databases-does-metabase-support.html">https://www.metabase.com/docs/latest/faq/setup/which-databases-does-metabase-support.html</a></p>
<p>这里有我们需要的Spark SQL，我们的大数据集群可以支持。比较遗憾的是没有Impala。</p>
<h2 id="metabase-安装">Metabase 安装</h2>
<h3 id="mysql">MySQL</h3>
<p>使用MySQL作为元数据存储。复用之前CDH的MySQL实例。</p>
<p>创建数据库、用户。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-SQL" data-lang="SQL"><span style="color:#75715e">-- 适合MySQL5.7及以上版本，支持更大的max key length。一个字符使用四个字节。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">DATABASE</span> metabase CHARACTER <span style="color:#66d9ef">SET</span> utf8mb4 <span style="color:#66d9ef">COLLATE</span> utf8mb4_unicode_ci;
<span style="color:#75715e">-- 适合MySQL5.6及以下版本。一个字符使用3个字节。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">DATABASE</span> metabase CHARACTER <span style="color:#66d9ef">SET</span> utf8 <span style="color:#66d9ef">COLLATE</span> utf8_unicode_ci;

<span style="color:#75715e">-- % 表示不限制host
</span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> <span style="color:#e6db74">&#39;metabase&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span> IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;metabase&#39;</span>;
<span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">ALL</span> <span style="color:#66d9ef">ON</span> metabase.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;metabase&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span>;

FLUSH <span style="color:#66d9ef">PRIVILEGES</span>;
<span style="color:#75715e">-- https://dev.mysql.com/doc/refman/5.7/en/grant.html
</span></code></pre></div><h4 id="常见问题">常见问题</h4>
<p>mysql 5.7与5.6的区别。</p>
<blockquote>
<p>767 bytes is the <a href="http://dev.mysql.com/doc/refman/5.1/en/create-index.html">stated prefix limitation</a> for InnoDB tables in MySQL version 5.6 (and prior versions). It&rsquo;s 1,000 bytes long for MyISAM tables. In MySQL version 5.7 and upwards this limit has been increased to 3072 bytes.</p>
</blockquote>
<p>Caused by: java.sql.SQLException: Specified key was too long; max key length is 767 bytes</p>
<p>Caused by: liquibase.exception.DatabaseException: (conn=175553) Specified key was too long; max key length is 767 bytes [Failed SQL: CREATE TABLE <code>metabase</code>.<code>core_organization</code> (<code>id</code> INT AUTO_INCREMENT NOT NULL, <code>slug</code> VARCHAR(254) NOT NULL, <code>name</code> VARCHAR(254) NOT NULL, <code>description</code> TEXT NULL, <code>logo_url</code> VARCHAR(254) NULL, <code>inherits</code> BIT(1) NOT NULL, CONSTRAINT <code>PK_CORE_ORGANIZATION</code> PRIMARY KEY (<code>id</code>), UNIQUE (<code>slug</code>))]</p>
<h3 id="metabase">Metabase</h3>
<p>下载metabase。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 以 /opt/metabase 为工作目录</span>
mkdir /opt/metabase <span style="color:#f92672">&amp;&amp;</span> cd /opt/metabase
<span style="color:#75715e"># 下载最新版本的metabase，参考 https://www.metabase.com/start/jar.html</span>
wget https://downloads.metabase.com/v0.35.1/metabase.jar
<span style="color:#75715e"># 创建插件目录 </span>
mkdir plugins
<span style="color:#75715e"># Spark SQL的驱动，jar包内置的有问题</span>
wget https://s3.amazonaws.com/sparksql-deps/metabase-sparksql-deps-1.2.1.spark2-standalone.jar -O plugins/metabase-sparksql-deps-1.2.1.spark2-standalone.jar
</code></pre></div><p>启动脚本 start.sh。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/usr/bin/bash
</span><span style="color:#75715e"></span>
export MB_DB_TYPE<span style="color:#f92672">=</span>mysql
export MB_DB_DBNAME<span style="color:#f92672">=</span>metabase
export MB_DB_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">3306</span>
export MB_DB_USER<span style="color:#f92672">=</span>metabase
export MB_DB_PASS<span style="color:#f92672">=</span>metabase
export MB_DB_HOST<span style="color:#f92672">=</span>172.31.0.100

kinit -kt hive.xh-hd2-peggy-dost000003.keytab hive/xh-hd2-peggy-dost000003@PEGGY.LING

mkdir -p logs

nohup java -Djavax.security.auth.useSubjectCredsOnly<span style="color:#f92672">=</span>false -jar metabase.jar  &gt;&gt; logs/metabase.log 2&gt;&amp;<span style="color:#ae81ff">1</span> &amp;

</code></pre></div><p>停止脚本 stop.sh。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/usr/bin/bash
</span><span style="color:#75715e"></span>
ps -ef | grep <span style="color:#e6db74">&#39;metabase.jar&#39;</span> | grep -v <span style="color:#e6db74">&#39;grep&#39;</span> | awk <span style="color:#e6db74">&#39;{print $2}&#39;</span> | xargs kill -9

</code></pre></div><p>文件夹结构如下。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>webapp@xh-hd2-peggy-dost000003 metabase<span style="color:#f92672">]</span>$ tree
├── hive.xh-hd2-peggy-dost000003.keytab
├── logs
│   └── metabase.log
├── metabase.jar
├── plugins
│   ├── metabase-sparksql-deps-1.2.1.spark2-standalone.jar
│   ├── sparksql.metabase-driver.jar
│   ├── ...
├── start.sh
└── stop.sh
</code></pre></div><p>参考：</p>
<ol>
<li>Metabase搭建手册：使用SparkSQL连接Hive <a href="https://webcache.googleusercontent.com/search?q=cache:DcmHXWOc9woJ:https://immm.in/archives/24.html+&amp;cd=5&amp;hl=zh-CN&amp;ct=clnk&amp;gl=hk">https://webcache.googleusercontent.com/search?q=cache:DcmHXWOc9woJ:https://immm.in/archives/24.html+&amp;cd=5&amp;hl=zh-CN&amp;ct=clnk&amp;gl=hk</a></li>
</ol>
<h4 id="配置-spark-sql-连接">配置 Spark SQL 连接</h4>
<p><img src="../../images/image-20200410180255501.png" alt="image-20200410180255501"></p>
<p>保存没有报错，就是成功了。</p>
<h4 id="常见问题-1">常见问题</h4>
<ol>
<li>使用内置的驱动报错：Unrecognized Hadoop major version number: 3.1.1</li>
<li>使用metabase-sparksql-deps-1.2.1.spark2-standalone.jar这个驱动报错，然而beeline连接是没问题的： transport.TSaslTransport :: SASL negotiation failure
javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]</li>
</ol>
<p>第一个问题，暂时忽略，使用其他驱动。</p>
<p>按理说，https://github.com/metabase/sparksql-deps 已经合并到 <a href="https://github.com/metabase/metabase/tree/v0.35.1/modules/drivers/sparksql">https://github.com/metabase/metabase/tree/v0.35.1/modules/drivers/sparksql</a> 了。内置驱动就能用才对。</p>
<p>能看到依赖hadoop-common包的版本差异。TODO: 还得细看。</p>
<p><img src="../../images/image-20200411071918161.png" alt="image-20200411071918161"></p>
<p>依赖的hadoop版本是3.1.0。</p>
<p><img src="../../images/image-20200411072135265.png" alt="image-20200411072135265"></p>
<p>内置Driver依赖3.1.1。报错信息也是包含3.1.1，是否切到3.1.0，重新打包就可以了？</p>
<p>第二个问题需要设置Java参数 <code>-Djavax.security.auth.useSubjectCredsOnly=false</code>。</p>
<p>通过底层机制获取凭证信息，而不是通过应用执行认证操作。</p>
<p><img src="../../images/image-20200410173734177.png" alt="image-20200410173734177"></p>
<p>参考：</p>
<ol>
<li>How to connnect sparksql in Kerberos enviroment <a href="https://discourse.metabase.com/t/how-to-connnect-sparksql-in-kerberos-enviroment/8290/2">https://discourse.metabase.com/t/how-to-connnect-sparksql-in-kerberos-enviroment/8290/2</a></li>
<li>javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided https://stackoverflow.com/questions/32205087/javax-security-sasl-saslexception-gss-initiate-failed-caused-by-gssexception</li>
<li>Below are listed some problems that may occur when attempting a login, and suggestions for solving them. <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/Troubleshooting.html">https://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/Troubleshooting.html</a></li>
</ol>
<h2 id="与-superset-比较">与 Superset 比较</h2>
<p>Superset是另外一个开源的BI工具。但是使用过程中体验不佳：</p>
<ol>
<li>不支持多表JOIN。这个不能忍。</li>
<li>直接写SQL，数据没法可视化。效率有点低下。</li>
<li>外观丑陋。FlaskAppbuilder生成的前后端架子。</li>
<li>Table源如果改了，建议删掉再添加，不然会有各种意外。</li>
<li>交互体验差。自定义SELECT COUNT(cookie) as pv，死活搞不定。正确的使用方式是设置label，体验不直观。</li>
<li>小bug多。用起来太容易烦躁了。对身心健康不好。</li>
</ol>

                    
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2020-04-10</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://xujiahua.github.io/posts/20200414-k8s-logging/">
                    Next<br>k8s 应用日志收集
                </a>
                
                
                
                <a class="older-posts" href="https://xujiahua.github.io/posts/20200410-spark-thrift-server-cdh/">
                    Previous<br>CDH6 启用 Spark Thrift Server
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                






            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2021 许嘉华的笔记
	</div>
    	</div>
    <script src="https://xujiahua.github.io//js/journal.js"></script>
    </body>
</html>
