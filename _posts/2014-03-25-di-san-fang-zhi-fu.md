---
layout: post
title: "第三方支付"
modified: 2014-03-25 00:46:49 +0800
category: []
tags: [业务,职业]
image:
  feature: 
  credit: 
  creditlink: 
comments: 
share: 
---

Payment Service Provider

从毕业到现在做了快三年的第三方支付项目，从业务角度来谈谈我的一些感受。

毕业生，一穷二白，开始学习英文沟通、编程技术，从bug fix和support起步，渐渐独立。长久以来把学习编程技术当成本职工作了，忽略了业务的价值。支付作为电子商务的最后一关，重要性不言而喻。特别是时下互联网小微金融服务兴起，感觉自己还算在热门行业中了。

也许重视起业务的价值，是由于这块业务所需要的技术并不需要怎么酷炫，自己去学的东西派不上用处的缘故。 支付平台嘛，要求稳定，对新技术也没啥要求。到现在为止，还是在.NET Framework 2.0平台上！

这套系统的最初版本，是对另一个第三方支付的封装。当初亲见了在压测系统的时候把依赖的第三方支付压爆了的场景，记忆犹新。有点像双11，支付宝没爆，银行系统崩溃了的场景。
支付环节并发的瓶颈往往在银行。若出在自身，也好解决，比如受Amazon购物启发，设计成异步系统：扣款、退款请求可以放进queue里慢慢处理，商家可通过配置Listener来监听处理结果，有可能会影响商家之于用户的体验，不细说。

往后的版本，逐渐直接与银行集成（省去服务费）。有的银行支持real time扣款、有的只接受批处理，为此还得设计不同的流程。（银行提供的都是无磁无密接口，只要有卡号、有效期、CVV就能扣款。这种接口也只有对信用度高的商户开放的。但具体是什么样难说了。）当然了，其实这是个体力活。不小的难度或是烦人之处就在于英文沟通、银行那边的低效反馈，最严重的是BA与DEV之间业务技术的分歧，为了一个字段可以邮件来来往往几个礼拜。技术上，还得解决银行接口的各种奇葩问题，用户体验不佳，闹心。
还有随着PCI审查的严格，针对PCI DSS的改动也相应增多。满足PCI DSS是第一位的。最近携程泄露信用卡的问题就动静不小。

厌倦了。。。全忙在这种项目上，在安全问题上没有时间考虑和改进。TBD

另一块是对账，对银行帐，没动过手，也是体力活，没啥兴趣。忙于重复无聊的业务细节确实意义不大。订单量不大，也没有性能优化的机会。

还有一块也是最重要的一块是风控，fraud management。要是没有风控，即使商家卖出台电脑，但经核实该卡是被盗刷的，卡所有人是有权申请拒付的，商家赔了电脑还得退钱。多这样折腾几次，得卖多少电脑才能回本啊。同样的，银行、投资客也是靠控制风险，抓大放小来盈利的。

想学习风控的一些策略和代码架构TBD。曾申请做这块被拒，因为集成银行缺人手。

这个项目组做的其实是非常骨干的一个东西。听说也只是赚点手续费。像移动支付、金融产品都是空白。

我所知道的有局限。深入思考标注了TBD的、尝试去了解第三方支付的上下游应该会有所帮助吧。